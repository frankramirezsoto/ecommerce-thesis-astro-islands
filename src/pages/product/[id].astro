---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { ProductDetailIsland } from '@/islands/ProductDetailIsland';
import { api } from '@/lib/api';

export async function getStaticPaths() {
  const products = await api.getAllProducts();

  return products.map((product) => ({
    params: {
      id: String(product.id),
    },
  }));
}

const { id } = Astro.params;
---
<BaseLayout title="Product">
  <ProductDetailIsland client:load productId={id ?? ''} />
</BaseLayout>
